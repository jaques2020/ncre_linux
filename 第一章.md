		第一章		计算机科学与计算机系统
	
	计算机科学
	|
	|_	英国数学家		图灵		图灵机		1936年论文中提到的模型
	|_	匈牙利科学家	冯.诺依曼	ENIAC		1945年提出二进制编码和存储程序等思想
		|_								存储体系对应空间域,指令的顺序执行过程对应的时间域
	|_					戈登.摩尔	摩尔定律	每过18个月,芯片上可以集成的晶体管数量将增加一倍
		|_								推算,CPU主频频率每增加1GHz,功耗将上升25W(单核时代)
						
	计算机系统层次结构
	|
	|_	硬件实现	0	数字罗基层		逻辑电路和连接线路,组成计算机硬件的基础.
	|_	硬件实现	1	微体系结构层	微指令集编写微程序来实现上层机器指令的功能.
	|_	硬件实现	2	传统机器层		面向计算机体系结构设计者的层次,提供机器识别的语言.
	|_	软件实现	3	操作系统层		操作系统管理和统一调度计算机系统中的软硬件资源
	|_	软件实现	4	汇编语言层		是高级语言层和机器语言过渡的中间件,一种以减少程序编写的复杂性为目的符号语言.
	|_	软件实现	5	高级语言层		一方面编写程序供上层用户使用;另一方面向低层传递指令.
	|_	软件实现	6	应用程序层		一般用户层次
	
	指令集
	|
	|_	是一个计算机系统支持的所有机器指令的集合,它常被看作软硬件直接的分界面.
	|_	计算机系统工作的基本过程:程序员编写的软件经过编译器翻译成可执行程序,也就是一个
		机器指令的序列,然后由低层硬件一条条读取这些指令来执行.
	
	指令集体系结构
	|
	|_	功能分类
			指令格式,寻址方式和常用指令
	|_	两大阵营
			CISC和RISC
	|		
	|_	指令格式	
			操作码+操作数
			|_	操作码指明操作类型,操作数指明值或地址
			|
			|_	助记符表示指令中的操作码和操作数
	|		
	|_	寻址方式
		|_	如何确定指令中操作数的地址及下一条指令的地址
		|_	按指令的寻址空间来分,分为立即数寻址,寄存器寻址,主存殉职和堆栈寻址.
			
	|_	指令的功能分类
		|_	数据传送指令,算术运算指令,逻辑运算指令,程序控制指令,输入输出指令,处理器控制和调试指令
	|		
	|_	CISC和RISC
		|_	CISC	复杂指令系统计算机
		|_	RISC	精简指令系统计算机
	|	
	|_	常用的ISA
		|_	X86		现存唯一的CISC指令集	兼容性,高性能				INTER主导
		|_	ARM		RISC指令集架构			低功耗						ARM公司
		|_	MIPS	RISC指令集架构			商业化不如ARM,软件生态差	龙芯
			
	存储系统
	|_	存储系统层次结构
			第一层	寄存器组			
				CPU的一部分，是汇编语言编程空间，高级语言编译器可支配空间
			第二层	高速缓冲存储器（Cache）		
				位于主存储器和CPU间，存放运行程序近期会用到的指令与数据，速度比主存快且Cache对汇编可见
			第三层	主存储器
				计算机主要部件，存储系统核心，编程空间
			第四层	辅助存储器
				软盘，硬盘组成
			第五层	脱机存储器
				空间越大，速度越慢，价格越便宜
		程序访问存储空间的局部性是计算机程序执行过程中的一种规律
			程序往往重复使用它刚刚使用过的数据和指令，称为程序访问的局部性。
			程序访问局部性包含时间局部性和空间局部性
				时间局部
					指最近访问过的内容很可能会在短期内被再次访问
				空间局部
					某个存储单元被访问，短期内其附近的存储单元也会被访问。
					
		Cache-主存-辅存
			Cache-主存基本做法：
				把正在执行的指令地址附近的一部分指令和数据从主存调入Cache供CPU连续访问；
				当不命中时，再从主存调入Cache。
				
				CPU和Cache间分布着1到2个，CPU-L1-L2-主存；CPU从地址装载数据采用就近原则
					共享型Inclusive Cache工作方式为某一地址的数据可能存在多级缓存中
					独占型Exclusive Cache保证某一地址的数据缓存只会在多级Cache中的一级（地址唯一）。
				

			Cache-主存层次主要设计的关键问题
				地址映射
					Cache和主存基本的地址映射方式：全相联映射，直接映射和组相联映射。
						全相联映射
							优势：块冲突概率低，Cache利用率高；劣势：线路复杂，成本高，速度低，适用小容量Cache
						直接映射
							访问速度比较快，硬件设备简单；缺点：主存块只能装入Cache特定的块位置，命中率低空间利用率低
						组相联映射
							以上两者相结合
				替换策略
					随机法（RAND）
						随机地确定替换的存储块
						方法简单，但命中差
					先进先出（FIFO）
						替换最早进入Cache的块
						较容易，命中优于RAND
					最近最少使用法（LRU）
						根据使用情况来选择最近最少使用的块来替换
						难实现，命中率较高
				数据一致性
					即同一数据在不同存储位置的多个拷贝应保持一致
					
					两种常用方式：
						写直达：
							每次CPU修改Cache数据会立即更新到主存，都会发起总线事务，数据一致性高，但效率低
						写回：
							每次CPU修改Cache数据要等到合适的时机才会更新到主存
					
					多核处理器中，MESI为最经典的缓存一致性协议，状态分为：
						修改（Modify），独占（Exclusive），共享（Shared）和失效（Invalid）
		
		
		虚拟存储系统
			满足以能够用程序对高速大容量主存的需求
			虚拟存储器对系统程序员不可见，对应用程序员是透明的。
	
	单核处理器基本结构
	
		控制器
			计算机系统的指挥中心
		运算器
			实现数据加工处理等功能的部件
		存储单元
			包括CPU片内的高速缓存和寄存器组,是CPU中暂时存放数据的地方,里面保存着那些等待处理的数据或已经处理过的数据.
	
	多核处理器基本结构
	
		主处理核+协处理核
		总线共享Cache结构
		片互联结构
		
		指令执行的五个阶段		一个指令周期
			
			取指令阶段			指令从主存储器移动到寄存器中
			指令译码阶段		识别指令种类获取操作数
			执行指令阶段		完成指令操作,实现指令
			访存取数阶段		访问指令地址码获取操作数
			结果写回阶段		运行数据结果写回某种存储形式中		
			
		流水线技术	微架构最基本要素
			
			输入->取指->译码->执行->访存->写回->输出
		
	操作系统的定义和作用
	
		为用户提供服务满足用户需求:
			程序开发
			程序运行
			I/O设备访问
			文件访问
			系统资源的访问
			错误检测和响应
			日志服务
			
		一组硬件和软件资源的集合,资源的管理者进行资源的分配和管理:
			处理器
			存储器
			I/O设备和文件
			
		操作系统的基本特征
		
			并发	两个或多个事件在同一时间间隔内发生
				并行			  在同一时刻发生
			共享	计算机系统中的软件资源可被多个并发执行的进程共同使用,而不是被一个进程所独占
				共享方式:
					互斥共享	同一时间内只允许一个进程访问该资源(临界资源)
					同时访问	一段时间内由多个进程"同时"对它们进行访问
			虚拟
				一个物理实体变为一个或多个逻辑上的对应物。
			异步
				在相同的计算机环境和初始条件下，在同一数据集上运行的同一程序每次执行的顺序和所需时间都不一定相同。
	
	操作系统的基本功能和原理
		
		处理器管理
			主要功能：
				中断处理
					外中断：异步中断（中断Interrupt），CPU执行指令以外事件的中断
					内中断：同步中断（异常Exceptrion），CPu内部事件引起的中断
				进程管理
					进程
						是计算机中的程序在某数据集合上的一次运行活动，使系统进行资源分配和调度的基本单位
					线程
						是进程中一个单一顺序的控制流
					进程的基本状态：
						运行态
						就绪态
						等待态
						新建态
						终止态
					进程控制
						创建，撤销和对进程的状态切换
						原子性：要么全做，要么全不做
					进程互斥和同步
					进程通信
						并发进程间相互交换信息
					处理器调度
					
					常见的CPU调度算法：
						先到先服务调度算法
						最短进程有限调度算法
						轮转调度算法
						优先级调度算法
						高响应比优先调度算法
						多级反馈队列调度算法
						
						
						
						
						
			处理器上的运行指令：
				特权指令：只被系统内核使用的指令，改变机器状态，修改寄存器内容，启动设备等敏感操作
				非特权指令：所有程序都能使用的
			
		
				
		
					练	习	题
	按照冯.诺依曼结构设计的计算机由运算器、控制器、存储器、输入设备和输出设备五部分组成。
	计算机系统是由硬件和软件组成。
	操作系统是一个计算机系统支持的所有机器指令的集合，它常被看作软硬件之间的分界面。
	根据操作数的数量不同，可以将指令格式分为零地址指令、一地址指令、二地址指令、三地址指令和多地址指令。
	按指令的寻址空间来分，寻址方式可以分为立即数寻址、寄存器寻址、主存寻址和堆栈寻址。
	按照指令系统复杂程度的不同，ISA可分为CISC和RISC两大阵营。
	程序访问的局部性包含时间局部性和空间局部性两方面。
	
					
					
					

		
		
			