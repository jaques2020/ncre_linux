		第五章		用户管理

用户和用户组管理

	用户和组
		用户拥有唯一用户名和密码,系统识别身份.
		用户组是具有相同特征用户的逻辑集合.
	
	用户和组的对应关系分为:
		一对一,一对多,多对一,多对多
	
	用户和组的管理
		系统不识别用户名,识别用户密码,密码存放在目录:	
			/etc/passwd		系统用户配置文件
		
用户和用户组管理相关文件
	
	/etc/passwd 的内容
		jac:x:1000:1000:jac:/home/jac:/bin/bash
	字段信息依次为
		用户名:密码:用户id:组id:描述信息:主目录:默认shell
	
	/etc/shadow 的内容
		jac:$6$EQc2nt1XdSBkVMLH$MomYEQ.62sveWj9DL.hB.b94OB8Ml2fX5WyDzTTlCNo7Ba.Z41G0Vnhc.T8oc5N5Dk64AvvfwLlQzZxMJb8Pw0::0:99999:7:::
	字段信息依次为
		用户名:加密密码(SHA512):最后一次修改时间:最小修改时间间隔（天）：密码有效期：密码需要变更前警告天数：密码过后宽限时间：帐号失效时间：保留字段
		
		在密码串钱加上！，\* 或x使密码暂时失效
		
	/etc/group 的内容 	
		jac:x:1000:
	字段信息依次为
		组名：密码：gid：组中的用户列表
		
	/etc/gshadow 的内容
	字段信息依次为
		组名：加密密码：管理员：组附加用户列表
		
用户和组管理的命令

	用户添加
		useradd	[选项] 用户名
			选项
				-u		手动指定用户的uid
				-d		手动指定用户主目录绝对路径
				-c		手动指定/etc/passwd文件中的用户信息中的描述信息字段内容
				-g		手动指定用户的初始组
				-G		指定用户的附加组
				-s		指定用户的登陆shell，默认/bin/bash
				-e		指定用户的实效日期，格式YYY-MM-DD
				-o		允许创建同uid的用户
				-m		创建用户时强制创建用户的主目录
				-r		创建系统用户，uid[1-499]供系统程序使用的用户，不会创建用户主目录
			
			创建用户时，默认分组为私有用户组机制，自动创建和用户名相同的组
			
			修改创建用户默认项
				useradd -D [选项] 参数
				vim /etc/default/useradd 文本编辑
	
	密码配置命令
		passwd [选项] 用户名
			选项
				-S		查询用户密码的状态
				-l		暂时锁定用户，在/etc/shadow文件中指定用户密码前加！
				-u		解锁用户
				--stdin	可将通过管道符输出的数据作为用户密码，批处理用途
				-n		设置修改密码后指定期间内不能再次修改
				-x		设置密码有效期
				-w		设置密码过期前警告天数
				-i		密码实效日期
		
	修改用户信息命令
		usermod [选项] 用户名
			选项
				-c		修改用户说明信息
				-d		修改用户的主目录（绝对路径）
				-e		修改用户的失效日期
				-g		修改用户的初始组
				-u		修改uid
				-G		修改用户的附加组
				-l		修改用户名称
				-L		临时锁定用户
				-U		解锁用户
				-s		修改登陆 的shell
				
	修改用户密码状态指令
		chage [选项] 用户名
			选项
				-l		列出用户的详细密码状态
				-d		修改最后一次修改密码的日期
				-m		修改密码最短保留的天数
				-M		修改密码的有效期
				-W		修改密码到期前的警告天数
				-i		修改密码过期后的宽限天数
				-E		修改帐号实效日期，格式YYY-MM-DD
	
	删除用户命令
		userdel	-r	用户名
		
		删除内容
			用户基本信息		/etc/passwd
			用户密码信息		/etc/shadow
			用户组基本信息		/etc/group
			用户组密码信息		/etc/gshadow
			用户个人文件		主目录，邮箱
			
	查看用户的uid和gid命令
		id 用户名
	
	用户切换命令
		su [选项] 用户名
			选项
				-	当前用户不仅切换为指定用户的身份同时所用的工作环境也切换
							不输入用户名 默认切换root用户
				-l	切换用户时切换工作环境
				-p	切换指定用户，但不改变当前工作环境
				-m	等效-p
				-c	切换用户并执行一次命令，执行后自动切换回来，选项后跟执行命令
			
	用户组管理命令
		groupadd [选项] 组名
			选项
				-g gid	指定gid
				-r		创建系统群组
		
		groupmod [选项] 组名
			选项
				-g gid		修改gid
				-n 新组名	修改组名
		
		groupdel	组名
			删除 /etc/group和/etc/gshadow 中的信息
			删除不是初始组的内容
		
		gpasswd [选项] 组名
			选项
				-A unames	分配组控制权 root
				-M unames	批量添加成员 root
				-r			移除组密码
				-R			组密码失效
				-a uname	添加用户入组
				-d uname	移除用户
				
			usermod -G 新组名 uname
				加入新组，移除旧组
			newgrp 组名
				切换组为新的初始组，同时该用户获得各个附加组的权限
			