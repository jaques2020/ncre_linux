		#第四章		shell脚本变成基础

##shell编程概述
	
	shell是相对于内核来说的，是建立在内核的基础上，面向用户的一种表现形式，
	操作系统提供文本界面负责接受用户命令，并将命令解释后传送给系统内核执行；
	是一个交互性命令解释器，同时还是一种功能强大的程序设计语言
	

	###脚本第一行		声明脚本类型
		<code>#!/bin/bash</code>

	###bash优点:
		命令记忆功能
		自动补全功能
		别名设置功能
		
	###shell脚本运行:
		修改限权为可执行:	chmod u+x xxx.sh
		执行脚本指令:		./xxx
		
		以脚本名作为参数传递给bash
		执行脚本指令:		bash xxx
						不需要在脚本第一行声明指定解析器
		
		以重定向方式传递给bash
		执行脚本指令:		bash < xxx
	
	
##shell基础

	通配符
		文件名的扩展，可以使用特定的通配符去匹配多个文件名
		
		常用通配符
		*			匹配任意字符的0次或多次出现
		？			匹配任意单个字符
		[]			匹配该字符组所限定的任何一个字符
		[^]或[!]	匹配不在该字符组中的任何一个字符
		{str1,str2...}匹配其中一个指定的字符串
	
	引号
		shell中引号的作用就是确保特殊字符能被正确使用
		单引号
			单引号内所有字符都是普通字符
		双引号
			除$（引用变量）,``（表达式语句）和\（转译字符）之外都是普通字符	
		倒引号
			`shell解释为命令行`
	
	\转译符号
		将有特殊含义的符号转译为普通符号输出
		
	输出/输入重定向符

		类型				符号					作用

		标准输入重定向	    命令 <文件				文件作为命令的输入
							命令 <<分界符			从标准输入中读入至分界符停止

		标准错误			命令错误信息 2 >  文件	覆盖的方式把错误信息输出到文件中
		输出重定向			命令错误信息 2 >> 文件	追加方式输出错误信息到文件中

		标准输出重定向	  	命令结果 >文件			覆盖方式将命令结果输出到文件中
							命令结果 >>文件			追加方式保存命令结果
			
		文件描述符
			每个进程都有三个文件:
				标准输入,标准输出和错误输出				对应文件描述符为 0,1,2
					错误输出和标准输出信息到同文件内	command > file 2>& 1
			
		命令执行操作符
			顺序执行;		一行多个命令间隔符号,从左到右执行
			逻辑与&&		符号前命令正确执行后才会执行符号后命令
			逻辑或||		符号前命令错误执行后才会执行符号后命令
				逻辑或与逻辑与	优先级相同
					判断命令是否正确
						ls /root/rest && echo "yes" || echo "no"

		大括号和小括号

			{}		大括号中的多条语句视为一条语句
					大括号中的语句保留格式
					大括号与语句间要有空格,每条语句结尾要加分号;
					
			()		多条命令成组
					括号与语句间无空格,语句结尾不用加分号(非语句之间的间隔)
					
		管道符,后台命令符合注释符

			管道符		|	连接多条命令,前一个命令的输出是下一个命令的输入
			后台命令符	&	实现多道进程运行成为可能
			
	
	
##shell编程
	变量
		用户自定义变量
			变量名		不能使用数字开头,通常小写
			变量赋值	name="value"
			变量引用	$name		命令 ${变量}命令	命令$"变量"命令
							name=$(命令)		$()		等效于	`命令`	将命令结果赋值变量
			
		数组
			相同数据类型的元素按顺序排列的集合
			array name=(val1...valn)
			array name[0]=hello
			下标可不连续,没有范围限制
			取数组下标值		${array name[index]}
			输出整个数组		${array name[*/@]}
				*				将整个数组扩展为一个字符串,元素间空格间隔
				@				分元素换行输出
							
		系统预定义变量
			
			$?		上跳命令执行的返回值
			$$		当前进程的pid
			$!		上个后台命令的pid
			$-		当前运行shell的选项
			$#		命令行上参数的个数
			$*/$@	命令行上实际给出的所有实参	参数全部输出/参数独立输出(遍历)
			
		位置参数变量
			
			$0		命令行本身
			$1		1个参数
			$9		9个参数
			${11}	11个参数
			
			shift	移动位置参数,使实参向左移动一位
			set	文件名1 文件名2		$0不能用于set赋值(类似形参的概念)
			
		环境变量
		
			echo $PATH		shell查找命令的目录列表
			echo $HOME		用户家目录绝对路径
			echo $PS1		shell主提示符
			echo $PWD		当前路径
			echo $SHELL		默认shell的路径
			
			用户自定义变量为局部作用域,系统为全局作用域
			export	变量名
				用于父进程在创建子进程时将变量传递给子进程,将变量放入进程转出区,是用户自定义变量成为全局变量
				[jac@localhost ~]$ name=jac
				[jac@localhost ~]$ bash
				[jac@localhost ~]$ echo $name

				[jac@localhost ~]$ exit
				exit
				[jac@localhost ~]$ echo $name
				jac
				[jac@localhost ~]$ export name
				[jac@localhost ~]$ bash
				[jac@localhost ~]$ echo $name
				jac

		变量的查询和删除
			
			unset	变量名		注销变量
			set					查询所有的变量,包括局部和全局
			env					查询所有环境变量,本进程及祖先进程的全局变量
			export				查询本进程利用export命令输出的全部变量
					子shell中能看到父shell的变量,继承关系
		
		数值运算
		
			declare [选项] 变量名
			
				选项	
					-	给变量设定类型属性
					+	取消变量的类型属性
					-a	将变量声明为数组型
					-i	整数型
					-r	只读变量					由于设置只读后只能重启shell,变量才会消失,否则无法删除
					-x	声明为环境变量				等效export
					-p	显示指定变量声明的类型
					
			
			expr和let
				
				$(expr $arg1 + $arg2)				expr语句中运算符号左右必须有空格
				let 运算结果变量=$arg1+$arg2
				
			使用$((算数表达式))运算
			
				运算结果变量=$((算数表达式))
				
			算术运算符优先级
				最大优先级为		单目正负号
									逻辑非,按位取反或补码
									乘除取模
									加减
									按位左右移
									比较符号
									等于不等于
									按位与
									按位异或
									按位或
									逻辑与
									逻辑或
				最小优先级为		赋值和运算赋值符号
	
	控制结构
		
		顺序结构
		
		选择结构
			if语句
				
				if测试条件
					then命令1
					else命令2
				fi
				
				if测试条件1
					then命令1
						exit 		退出执行程序,执行下个判断条件,变量赋给$?
					elif条件2
					then命令2
					else命令3
				fi
				
			case语句
				
				case $变量名 in
				"arg1") 命令
						命令;;
				"arg2") 命令
						命令;;
				省略其他分支
				*) 	命令
					命令;;
				seac
				
				条件测试语句
					
					test 条件语句
					[ 条件语句 ]	条件语句左右有空格,条件语句中每个组件都有空格
				
				条件测试运算符
					
					文件测试运算符
						-r	可读为真
						-w	可写为真
						-x	可执行为真
						-f	普通文件为真
						-d	目录为真
						-b	块设备文件为真
						-c	字符设备文件为真
						-s	文件长度大于0为真
						-e	存在为真
					
					字符串测试运算符
						-z s1		字符串长度为0,为真
						-n s1		字符串长度大于0,为真
						s1 = s2		等于为真,符号两侧有空格
						s1 != s2	不等于为真
						
					数值测试运算符
						n1 -eq n2	相等为真
						n1 -ne n2	不等为真
						n1 -lt n2	左侧小于为真
						n1 -le n2	左侧小于等于为真
						n1 -gt n2	左侧大于为真
						n1 -ge n2	左侧大于等于为真
						
						
		循环结构
		
			while语句					成立则进入循环
			
				while condition			
					do
						statements		执行的语句
					done
					
			until语句					成立则循环终止

				until condition
					do
						statements
					done
				
			for语句						遍历
			
				for((exp1,exp2,exp3))
				do
					statements
				done
			
				for var in var_list
				do
					statements
				done
				
			select in语句				带编号的选择列表,输入对应编码选择结果,ctrl+d终止循环
				
				select var in var_list
				do
					statements
				done
			
			关键字break和continue		同python
			
shell函数
	
	函数定义
		
		function name(){				也可以不写function关键字,shell函数没有形参概念
			statements
			[return val]
		}
		
	调用
		
		name 参数1 参数2 ...
		